@using Microsoft.AspNet.Identity
@model IEnumerable<MiHadaMadrinaShop.Models.Producto>

@{
    ViewData["Title"] = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h1>Productos</h1>

<div class="container mt-5 mb-5">
    <div class="d-flex justify-content-center row">
        <div class="col-md-10">
            
            @foreach (var item in Model) {

                <div class="row p-2 bg-white border rounded">
                    <div class="col-md-3 mt-1"> @Html.DisplayFor(modelItem => item.ImagenUrl)</div>
                    <div class="col-md-6 mt-1">
                        <h5>@Html.DisplayFor(modelItem => item.Nombre)</h5>

                        <div class="mt-1 mb-1 spec-1">@Html.DisplayFor(modelItem => item.DescripcionCorta)</div>
                        <p class="text-justify text-truncate para mb-0">@Html.DisplayFor(modelItem => item.DescripcionLarga)<br><br></p>
                    </div>
                    <div class="align-items-center align-content-center col-md-3 border-left mt-1">
                        <div class="d-flex flex-row align-items-center">
                            <h4 class="mr-1"> @Html.DisplayFor(modelItem => item.PrecioConDescuento)</h4>&nbsp;<span class="strike-text">@Html.DisplayFor(modelItem => item.Precio)</span>
                        </div>
                        <h6 class="text-success">Free shipping</h6>
                        <div class="d-flex flex-column mt-4">
                            <a class="btn btn-primary btn-sm" asp-action="Details" asp-route-id="@item.IdProducto">Detalles</a>
                            @{if (User.Identity.GetUserId() == null){
                                    <a class="btn btn-secondary btn-sm mt-2">A&ntilde;adir a la cesta<br>Debes iniciar sesión</a>
                            }else{
                                    <a class="btn btn-outline-primary btn-sm mt-2" asp-controller="TCestums" asp-action="AddProductToCart" asp-route-id="@item.IdProducto">A&ntilde;adir a la cesta</a>
                            }
                            }
                            
                        </div>
                    </div>
                </div>
                <br>
            
            }

        </div>
     </div>
</div>


